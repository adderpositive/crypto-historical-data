!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){const e=t.getFullYear();let n=t.getMonth()+1,o=t.getDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),e+"-"+n+"-"+o}function a(){let t=arguments[0]||new Date,e=arguments[1]||new Date;return null==arguments[0]&&null==arguments[1]&&e.setDate(t.getDate()-6),{dateFrom:t,dateTo:e,days:function(t,e){const n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),o=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((o-n)/864e5)}(e,t)}}n.r(e);let s=null;function r(t){let{fiat:e,symbol:n,days:o,timestamp:a}=t;return"MIOTA"===n&&(n="IOT"),"BTC"===e&&"BTC"===n&&(e="USD"),a&&(a/=1e3),new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("POST","./data-currency",!0),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.onload=(()=>{200===r.status&&t(r.responseText)}),r.send(JSON.stringify({fiat:e,symbol:n,days:o,timestamp:a}))})}function d(t){const e=t,n=new XMLHttpRequest;n.open("POST","./save",!0),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.onload=(()=>{n.readyState===n.DONE&&200===n.status&&(function(){const t=document.querySelector(".preloader");t.parentNode.removeChild(t),clearInterval(s)}(),function(){if(null===document.querySelector(".download-buttons")){const t=document.getElementById("app"),e=document.createElement("div");e.innerHTML='<div class="button-wrap download-buttons"><a class="button" href="./data/data.json" download>Download .json</a><br /><a class="button" href="./data/data.csv" download>Download .csv</a><br /><a class="button js-table-open" href="#">Just show data</a></div>',t.appendChild(e.firstChild)}}(),function(){const t=document.querySelector(".js-table-open"),e=document.querySelector(".js-table-close"),n=document.querySelector(".table-wrap");t.addEventListener("click",()=>{n.classList.add("active")}),e.addEventListener("click",()=>{n.classList.remove("active")})}(),function(t){const e=[],n=document.querySelector(".js-table"),o=n.childNodes.length;let a,s;for(a in t){let n;for(n in t[a].data){const o=document.createElement("tr"),s=new Date(1e3*t[a].data[n].time),r=s.getDate()+". "+(s.getMonth()+1)+". "+s.getFullYear();o.innerHTML="<td>"+r+"</td><td>"+t[a].name+"</td><td>"+t[a].data[n].close+"</td><td>"+t[a].data[n].high+"</td><td>"+t[a].data[n].low+"</td><td>"+t[a].data[n].open+"</td><td>"+t[a].data[n].volumefrom+"</td><td>"+t[a].data[n].volumeto+"</td>",e.push(o)}}if(o){const t=document.querySelector("tbody");for(;t.firstChild;)t.removeChild(t.firstChild)}else{const t=document.createElement("div");t.innerHTML='<table class="u-full-width"><thead><tr><th>Date</th><th>Coin</th><th>Close</th><th>High</th><th>Low</th><th>Open</th><th>Volume from</th><th>Volume to</th></tr></thead><tbody></tbody></table>',n.appendChild(t.firstChild)}const r=document.querySelector("tbody");for(s in e)r.appendChild(e[s])}(e))}),n.send({data:JSON.stringify(t)})}function l(t){const e=new XMLHttpRequest;e.open("POST","./data-all-currencies",!0),e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.onload=(()=>{e.readyState===e.DONE&&200===e.status&&function(t,e){const n=[],o=JSON.parse(t).data,a=Object.keys(o),s=[],{amountOfCurrencies:l,fiat:c,days:u,timestamp:i}=e;let m;for(m in a.sort((t,e)=>o[t].rank-o[e].rank),a)s.push(o[a[m]]),n.push(r({fiat:c,days:u,symbol:s[m].symbol,timestamp:i}));Promise.all(n).then(t=>{let e;const n="BTC"===c&&"BTC"===s[m].symbol;for(e in t)if(s[e].data=JSON.parse(t[e]).Data,n){let t;for(t in s[m].data)s[e].data[t].close=1,s[e].data[t].high=1,s[e].data[t].low=1,s[e].data[t].open=1,s[e].data[t].volumefrom=1,s[e].data[t].volumeto=1}console.log(s),d(s)})}(e.response,t)}),function(){const t=document.querySelector("body"),e=document.createElement("div");e.innerHTML='<div class="preloader"><div class="rocket-trajectory"><div class="rocket"><i class="rocket__fuel rocket__fuel--1"></i><i class="rocket__fuel rocket__fuel--2"></i><i class="rocket__fire"></i></div></div><div class="preloader__loading">Loading data<span class="js-dot"></span></div></div>',t.appendChild(e.firstChild),s=setInterval(()=>{const t=document.querySelector(".js-dot");let e=t.innerText||t.textContent;e.length<3?e+=".":e="",t.innerHTML=e},500)}(),e.send(JSON.stringify({amountOfCurrencies:t.amountOfCurrencies}))}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementsByClassName("js-search")[0];let e=7,n=null,s=null;e=a().days,function(){const t=document.getElementById("date-to"),e=document.getElementById("date-from");t.value=o(a().dateFrom),e.value=o(a().dateTo)}(),function(){const t=document.querySelector(".js-show-settings");t.addEventListener("click",()=>{document.querySelector(".settings-wrap").querySelector(".settings").style.display="block",t.style.display="none"})}(),t.addEventListener("click",()=>{const t={};n=function(){const t=document.getElementById("date-to").value;return t?Date.parse(t):null}(),s=function(){const t=document.getElementById("date-from").value;return t?Date.parse(t):null}(),n>s?(e=a(new Date(n),new Date(s)).days,t.amountOfCurrencies=function(){const t=+document.getElementById("amount").value;return t||null}(),t.fiat=function(){const t=document.getElementById("fiat").value;return t||null}(),t.days=e,t.timestamp=n,l(t)):alert("Date from can not be bigger or same then Date to!")})})}]);